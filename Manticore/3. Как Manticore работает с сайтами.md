### Как Manticore работает с сайтами:

1. **Обработка данных через скрипты**: Чтобы Manticore индексировал содержимое сайта, необходимо сначала собрать данные с сайта. Это можно сделать с помощью:
    
    - **Веб-скрейперов** (например, с использованием Python-библиотек, таких как BeautifulSoup или Scrapy).
    - **API сайта** (если сайт предоставляет API для извлечения данных).
    
    Эти инструменты собирают контент страницы (текст, заголовки, метаданные) и преобразуют его в формат, который затем можно передать в Manticore для индексации.
    
2. **Загрузка данных в Manticore**: После того как сайт был пропарсен и данные были собраны (например, через скрипты или API), их можно загружать в Manticore через SQL-подобные запросы для индексации. В этом случае данные могут храниться в базах данных или файлах, а затем передаваться в Manticore для поиска.
    
3. **Автоматическая периодическая индексация**: Если сайт обновляется регулярно, можно настроить периодическую индексацию данных, чтобы поддерживать актуальность поиска. Для этого используются **источники данных** (data sources) в конфигурации Manticore, которые могут быть связаны с базами данных или текстовыми файлами, куда периодически собираются данные с сайта.
    

### Пример процесса индексации сайта с помощью Manticore:

1. **Парсинг контента сайта**: Вы используете инструмент веб-скрейпинга, такой как Scrapy, для извлечения текстового содержимого, заголовков, ссылок и других данных с сайта.

Пример использования Symfony Panther для рендеринга и парсинга страниц:

```PHP
<?php
require 'vendor/autoload.php';

use Symfony\Component\Panther\Client;

$client = Client::createChromeClient();
$crawler = $client->request('GET', 'https://example.com');
$title = $crawler->filter('h1')->text(); // Извлекаем заголовок h1

echo $title;
```

2. **Подготовка данных для загрузки в Manticore**: Собранные данные сохраняются в базе данных или текстовом файле. Например, можно сохранить информацию о заголовке и содержимом статьи в таблицу MySQL.

3. **Индексация данных в Manticore**: Manticore настроен для индексации этих данных. Конфигурация Manticore указывает на базу данных, где хранится контент сайта, и периодически извлекает данные для обновления индекса.
    
    Пример конфигурации для индексации данных из базы MySQL:

```plaintext
source my_website_source {
    type          = mysql
    sql_host      = localhost
    sql_user      = user
    sql_pass      = password
    sql_db        = website_db
    sql_query     = SELECT id, title, content FROM pages WHERE updated_at > NOW() - INTERVAL 1 DAY;
}

index my_website_index {
    source        = my_website_source
    path          = /var/lib/manticore/my_website_index
}
```

4. **Выполнение поиска**: После того как данные проиндексированы, Manticore может выполнять поиск по ключевым словам и фразам. Запросы будут возвращать документы или страницы, которые содержат искомый контент.

Пример поиска в Manticore:

```SQL
SELECT 
	* 
FROM my_website_index 
WHERE 
	MATCH('интересующий контент') 
ORDER BY relevance DESC;
```

### Важные моменты:

- **Manticore не умеет сам парсить сайты**, но можно использовать внешний инструмент для сбора данных с сайта (например, с помощью Python или специализированных скрейперов).
- **Manticore передаются структурированные данные**, например, заголовки и текст, а он уже их индексирует для поиска.
- **Периодическая индексация**: Если данные сайта обновляются, надо настроить механизм регулярного парсинга и обновления индексов, чтобы поддерживать актуальность поиска.

Таким образом, Manticore эффективно работает с данными сайтов, но для этого нужно предварительно собрать и подготовить данные с помощью сторонних инструментов.