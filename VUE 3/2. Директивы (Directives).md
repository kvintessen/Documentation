**Директивы** в Vue — это специальные атрибуты, которые используются для привязки реактивных данных к элементам DOM, управления поведением элементов и динамического изменения интерфейса. Во Vue 3 есть несколько встроенных директив, таких как `v-if`, `v-for`, `v-bind`, `v-model`, `v-on`, но также есть возможность создавать свои собственные директивы для более сложных случаев управления DOM.

#### Основные встроенные директивы

1. **`v-bind`** — Привязка атрибутов и пропсов
2. **`v-model`** — Двусторонняя привязка данных
3. **`v-if`** — Условный рендеринг
4. **`v-for`** — Перебор элементов массива или объекта
5. **`v-on`** — Обработка событий

Теперь рассмотрим каждую из этих директив и их применение на TypeScript.

### 1. **`v-bind`** — Привязка атрибутов

`v-bind` используется для динамической привязки атрибутов к HTML-элементам или свойствам компонентов. В Vue 3 можно привязывать не только одно значение, но и объект со множеством атрибутов.

#### Пример:

```TS
<template>
  <div>
    <!-- Привязываем значение к атрибуту href динамически -->
    <a :href="url">Перейти на сайт</a>

    <!-- Привязка нескольких атрибутов с использованием объекта -->
    <img v-bind="imgAttrs" />
  </div>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';

export default defineComponent({
  setup() {
    const url = ref('https://www.example.com');
    
    const imgAttrs = ref({
      src: 'https://www.example.com/image.jpg',
      alt: 'Пример изображения'
    });

    return { url, imgAttrs };
  }
});
</script>
```

В этом примере:

- Атрибут `href` у элемента `<a>` изменяется динамически в зависимости от значения переменной `url`.
- Директива `v-bind` также может привязывать объект со множеством атрибутов, как в случае с элементом `<img>`, где передаются `src` и `alt` через объект `imgAttrs`.

### 2. **`v-model`** — Двусторонняя привязка данных

Директива `v-model` используется для двусторонней привязки данных, например, для текстовых полей, чекбоксов и других интерактивных элементов.

```TS
<template>
  <div>
    <input v-model="name" placeholder="Введите имя" />
    <p>Привет, {{ name }}!</p>
  </div>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';

export default defineComponent({
  setup() {
    const name = ref('');

    return { name };
  }
});
</script>
```

В этом примере:

- Текстовое поле использует `v-model`, что автоматически синхронизирует значение между элементом `<input>` и переменной `name`.
- Когда пользователь вводит текст, переменная `name` обновляется, и соответствующий параграф также автоматически обновляется.

### 3. **`v-if` и `v-else`** — Условный рендеринг

Директива `v-if` используется для условного рендеринга элемента в зависимости от значения переменной. Если условие истинно, элемент отображается, если ложно — элемент удаляется из DOM.

#### Пример:

```TS
<template>
  <div>
    <p v-if="isLoggedIn">Добро пожаловать, пользователь!</p>
    <p v-else>Пожалуйста, войдите в систему.</p>
    <button @click="toggleLogin">Переключить состояние</button>
  </div>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';

export default defineComponent({
  setup() {
    const isLoggedIn = ref(false);

    const toggleLogin = () => {
      isLoggedIn.value = !isLoggedIn.value;
    };

    return { isLoggedIn, toggleLogin };
  }
});
</script>
```

В этом примере:

- Элемент `<p>` отображается или скрывается в зависимости от значения переменной `isLoggedIn`.
- Кнопка переключает состояние пользователя (вошёл/не вошёл), что динамически меняет рендеринг текста.

### 4. **`v-for`** — Перебор массивов и объектов

`v-for` используется для рендеринга списка элементов на основе массива или объекта. Он также поддерживает привязку ключей с помощью атрибута `key`, что помогает Vue более эффективно обновлять DOM.

#### Пример:

```TS
<template>
  <ul>
    <li v-for="(fruit, index) in fruits" :key="index">
      {{ index + 1 }}. {{ fruit }}
    </li>
  </ul>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';

export default defineComponent({
  setup() {
    const fruits = ref(['Яблоко', 'Банан', 'Апельсин', 'Киви']);

    return { fruits };
  }
});
</script>
```

В этом примере:

- Используется `v-for` для перебора массива `fruits`, рендеря каждый элемент в виде элемента списка `<li>`.
- Атрибут `:key` помогает Vue эффективно обновлять список при изменении данных.

### 5. **`v-on`** — Обработка событий

`v-on` используется для привязки обработчиков событий к элементам. Это может быть событие `click`, `submit`, `input`, и любое другое DOM-событие.

#### Пример:

```TS
<template>
  <div>
    <button @click="increment">Нажми меня</button>
    <p>Счётчик: {{ count }}</p>
  </div>
</template>

<script lang="ts">
import { defineComponent, ref } from 'vue';

export default defineComponent({
  setup() {
    const count = ref(0);

    const increment = () => {
      count.value++;
    };

    return { count, increment };
  }
});
</script>
```

В этом примере:

- Событие `click` связано с кнопкой с помощью директивы `v-on`, сокращённой до `@click`.
- При каждом клике вызывается функция `increment`, которая увеличивает значение счётчика `count`.

### Создание пользовательских директив

Помимо встроенных директив, Vue 3 позволяет создавать **пользовательские директивы** для управления DOM напрямую. Пользовательская директива может применяться для сложных случаев, когда нужно напрямую взаимодействовать с элементом, например, фокусировать элемент при его появлении.

#### Пример создания директивы для автофокуса

Создадим пользовательскую директиву `v-focus`, которая автоматически устанавливает фокус на элемент, когда он появляется.

#### Шаг 1: Определение директивы

```TS
import { DirectiveBinding } from 'vue';

// Создание пользовательской директивы
export const vFocus = {
  // Хук `mounted` вызывается, когда элемент добавлен в DOM
  mounted(el: HTMLElement) {
    el.focus(); // Устанавливаем фокус на элемент
  }
};
```

#### Шаг 2: Использование директивы в компоненте

```TS
<template>
  <div>
    <input v-focus placeholder="Автофокус на этом поле" />
  </div>
</template>

<script lang="ts">
import { defineComponent } from 'vue';
import { vFocus } from './directives/vFocus';

export default defineComponent({
  directives: {
    focus: vFocus // Регистрация пользовательской директивы
  }
});
</script>
```

В этом примере:

- Директива `v-focus` автоматически фокусирует элемент `<input>` при его монтировании в DOM. Это может быть полезно для улучшения UX, например, в формах.

### Пользовательские директивы с параметрами

Пользовательские директивы могут принимать аргументы и модификаторы, что позволяет более гибко настраивать их поведение.

#### Пример директивы с параметрами

Создадим директиву `v-color`, которая изменяет цвет текста элемента на основе переданного параметра.

```TS
import { DirectiveBinding } from 'vue';

export const vColor = {
  mounted(el: HTMLElement, binding: DirectiveBinding) {
    el.style.color = binding.value; // Изменяем цвет текста
  }
};
```

Использование директивы:

```TS
<template>
  <div>
    <p v-color="'red'">Этот текст будет красным</p>
    <p v-color="'blue'">Этот текст будет синим</p>
  </div>
</template>

<script lang="ts">
import { defineComponent } from 'vue';
import { vColor } from './directives/vColor';

export default defineComponent({
  directives: {
    color: vColor // Регистрация директивы
  }
});
</script>
```

### Заключение

Директивы в Vue — это мощный инструмент для управления элементами DOM и их поведением. Встроенные директивы, такие как `v-bind`, `v-model`, `v-if`, `v-for` и `v-on`, покрывают основные сценарии работы с данными и взаимодействия с элементами интерфейса. Однако, Vue также предоставляет возможность создания собственных директив для решения более специфичных задач, таких как автофокус или изменение стилей. Пользовательские директивы могут быть очень гибкими и принимать параметры и модификаторы для тонкой настройки их поведения.